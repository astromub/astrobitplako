<div class="content-section" id="analytics-section">
    <h2>Advanced Analytics</h2>
    <div class="dashboard-grid">
        <div class="stat-cards">
            <div class="stat-card">
                <div class="stat-value" id="total-trades">156</div>
                <div class="stat-label">Total Trades</div>
                <div class="stat-change positive">+24 This Week</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avg-win">$84.50</div>
                <div class="stat-label">Average Win</div>
                <div class="stat-change positive">+$12.30</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avg-loss">$62.80</div>
                <div class="stat-label">Average Loss</div>
                <div class="stat-change negative">-$5.20</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="profit-factor">1.42</div>
                <div class="stat-label">Profit Factor</div>
                <div class="stat-change positive">+0.15</div>
            </div>
        </div>
        
        <div class="trading-panel">
            <h3>Performance Over Time</h3>
            <div class="chart-container">
                <canvas id="equity-chart"></canvas>
            </div>
        </div>
        
        <div class="quick-stats">
            <h3>Asset Performance</h3>
            <div class="chart-container">
                <canvas id="asset-performance-chart"></canvas>
            </div>
        </div>
        
        <div class="market-overview">
            <h3>Trade Distribution</h3>
            <div class="chart-container">
                <canvas id="trade-distribution-chart"></canvas>
            </div>
        </div>
        
        <div class="positions-panel">
            <h3>Monthly Performance</h3>
            <table class="positions-table">
                <thead>
                    <tr>
                        <th>Month</th>
                        <th>Trades</th>
                        <th>Win Rate</th>
                        <th>Profit/Loss</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>January</td>
                        <td>42</td>
                        <td class="positive">71%</td>
                        <td class="positive">+$1,240</td>
                    </tr>
                    <tr>
                        <td>February</td>
                        <td>38</td>
                        <td class="positive">68%</td>
                        <td class="positive">+$980</td>
                    </tr>
                    <tr>
                        <td>March</td>
                        <td>45</td>
                        <td class="positive">74%</td>
                        <td class="positive">+$1,520</td>
                    </tr>
                    <tr>
                        <td>April</td>
                        <td>31</td>
                        <td class="negative">52%</td>
                        <td class="negative">-$320</td>
                    </tr>
                    <tr>
                        <td>May</td>
                        <td>28</td>
                        <td class="positive">67%</td>
                        <td class="positive">+$890</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="trading-panel">
            <h3>Risk Analysis</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <div>
                    <h4>Drawdown Analysis</h4>
                    <div class="stat-card" style="margin-top: 15px;">
                        <div class="stat-value">8.2%</div>
                        <div class="stat-label">Maximum Drawdown</div>
                    </div>
                    <div class="stat-card" style="margin-top: 15px;">
                        <div class="stat-value">12.4 days</div>
                        <div class="stat-label">Average Recovery Time</div>
                    </div>
                </div>
                <div>
                    <h4>Risk Metrics</h4>
                    <div class="stat-card" style="margin-top: 15px;">
                        <div class="stat-value">1.85</div>
                        <div class="stat-label">Sharpe Ratio</div>
                    </div>
                    <div class="stat-card" style="margin-top: 15px;">
                        <div class="stat-value">2.1%</div>
                        <div class="stat-label">Volatility</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize analytics charts when section is loaded
    if (window.tradingApp && window.tradingApp.currentSection === 'analytics') {
        setTimeout(() => {
            if (window.tradingApp.platform && window.tradingApp.platform.chartManager) {
                // Equity curve chart
                const equityData = {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Account Balance',
                        data: [10000, 10200, 10500, 10300, 10800, 11000],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 2,
                        fill: true
                    }]
                };
                
                // Asset performance chart
                const assetData = {
                    labels: ['EUR/USD', 'GBP/USD', 'USD/JPY', 'Gold'],
                    datasets: [{
                        data: [45, 25, 20, 10],
                        backgroundColor: ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6']
                    }]
                };
                
                // Trade distribution chart
                const tradeDistData = {
                    labels: ['Winning Trades', 'Losing Trades'],
                    datasets: [{
                        data: [68, 32],
                        backgroundColor: ['#10b981', '#ef4444']
                    }]
                };
                
                window.tradingApp.platform.chartManager.createPriceChart('equity-chart', 'Equity', equityData.datasets[0].data);
                window.tradingApp.platform.chartManager.createPieChart('asset-performance-chart', assetData);
                window.tradingApp.platform.chartManager.createPieChart('trade-distribution-chart', tradeDistData);
            }
        }, 100);
    }
});
</script>